---
id: reset-password-flow
title: Building the reset password flow
hide_title: true
---

<!-- COPY DOCS -->
<!-- ./thirdpartyemailpassword/common-customizations/reset-password/reset-password-flow.mdx -->

import PreBuiltUITabs from "/src/components/tabs/PreBuiltUITabs";
import TabItem from "@theme/TabItem";
import CustomUITabs, { FrontendMobileSubTabs, FrontendWebSubTabs } from "/src/components/tabs/CustomUITabs";

# Building the reset password flow

## Pre Built UI

<PreBuiltUITabs>

<TabItem value="reactjs">

You will see this if you navigate to `/auth/reset-password`.
 
<img alt="UI to send password reset email" width="500px" src="/img/emailpassword/reset-password-enter-email.png" />

You should also see the following when you navigate to `/auth/reset-password?token=TOKEN`:

<img alt="UI to change password" width="500px" src="/img/emailpassword/reset-password-submit-new-password.png" />

</TabItem>

</PreBuiltUITabs>

## Custom UI

### Sending the reset password email

<CustomUITabs>

<TabItem value="web">

<FrontendWebSubTabs>

<TabItem value="npm">

```tsx
import ^{recipeNameCapitalLetters} from "supertokens-web-js/recipe/^{codeImportRecipeName}"

async function sendResetEmail(email: string) {
    const response = await ^{recipeNameCapitalLetters}.sendPasswordResetEmail({
        formFields: [
            {
                id: "email",
                value: email,
            }
        ],
    });

    // Error handling
    if (response.status === "FIELD_ERROR") {
        // Iterate through form fields to identify the error
        response.formFields.forEach(field => {
            // The id will match the values you passed when calling signUp
            console.log("Error in field with id:", field.id)
            console.log(field.error);
        })
    }
}
```

</TabItem>

<TabItem value="script">

```tsx
import ^{recipeNameBundle} from "supertokens-web-js-script/recipe/^{codeImportRecipeName}"
async function sendResetEmail(email: string) {
    const response = await ^{recipeNameBundle}.sendPasswordResetEmail({
        formFields: [
            {
                id: "email",
                value: email,
            }
        ],
    });

    if (response.status === "FIELD_ERROR") {
        // Iterate through form fields to identify the error
        response.formFields.forEach(field => {
            // The id will match the values you passed when calling signUp
            console.log("Error in field with id:", field.id)
            console.log(field.error);
        })
    }
}
```

</TabItem>

</FrontendWebSubTabs>

</TabItem>
<TabItem value="mobile">

<FrontendMobileSubTabs>

</FrontendMobileSubTabs>

</TabItem>

</CustomUITabs>

### Set a new password for a user

:::info
By default the the email will link to `/auth/reset-password?token=`. When using custom UI, you have to handle this route in your frontend application.
:::

<CustomUITabs>

<TabItem value="web">

<FrontendWebSubTabs>

<TabItem value="npm">

Once the user clicks on the link in the email, you can prompt the user to enter a new password and then call the `submitNewPassword` function.

```tsx
import ^{recipeNameCapitalLetters} from "supertokens-web-js/recipe/^{codeImportRecipeName}";

async function submitNewPassword(password: string) {
    const response = await ^{recipeNameCapitalLetters}.submitNewPassword({
        formFields: [
            {
                id: "password",
                value: password,
            }
        ],
    });

    if (response.status === "RESET_PASSWORD_INVALID_TOKEN_ERROR") {
        // Token in the query params of the current location is either invalid or expired
    }

    if (response.status === "FIELD_ERROR") {
        // Iterate through form fields to identify the error
        response.formFields.forEach(field => {
            // The id will match the values you passed when calling signUp
            console.log("Error in field with id:", field.id)
            console.log(field.error);
        })
    }
}
```

</TabItem>

<TabItem value="script">

Once the user clicks on the link in the email, you can prompt the user to enter a new password and then call the `submitNewPassword` function.

```tsx
import ^{recipeNameBundle} from "supertokens-web-js-script/recipe/^{codeImportRecipeName}";

async function submitNewPassword(password: string) {
    const response = await ^{recipeNameBundle}.submitNewPassword({
        formFields: [
            {
                id: "password",
                value: password,
            }
        ],
    });

    if (response.status === "RESET_PASSWORD_INVALID_TOKEN_ERROR") {
        // Token in the query params of the current location is either invalid or expired
    }

    if (response.status === "FIELD_ERROR") {
        // Iterate through form fields to identify the error
        response.formFields.forEach(field => {
            // The id will match the values you passed when calling signUp
            console.log("Error in field with id:", field.id)
            console.log(field.error);
        })
    }
}
```

</TabItem>

</FrontendWebSubTabs>

</TabItem>
<TabItem value="mobile">

<FrontendMobileSubTabs>

</FrontendMobileSubTabs>

</TabItem>

</CustomUITabs>
