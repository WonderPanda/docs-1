---
id: email-verification-flow
title: Building the email verification flow
hide_title: true
---

<!-- COPY DOCS -->
<!-- ./thirdpartyemailpassword/common-customizations/email-verification/email-verification-flow.mdx -->

import PreBuiltUITabs from "/src/components/tabs/PreBuiltUITabs";
import TabItem from "@theme/TabItem";
import CustomUITabs, { FrontendMobileSubTabs, FrontendWebSubTabs } from "/src/components/tabs/CustomUITabs";

# Building the email verification flow

## Enable email verification

:::info
- Email verification is turned off by default. It is strongly encouraged to enable it to ensure the authenticity of your users.
- If you are already using SuperTokens in production and turn on email verification, your users will be redirected to the email verification screen next time they use your application.
:::

:::important
When using custom UI, you do not need to enable email verification on the frontend.
:::

<PreBuiltUITabs>

<TabItem value="reactjs">

```tsx
import SuperTokens from "supertokens-auth-react";
import ^{recipeNameCapitalLetters} from "supertokens-auth-react/recipe/^{codeImportRecipeName}";
import Session from "supertokens-auth-react/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
        websiteDomain: "..."
    },
    recipeList: [
        ^{recipeNameCapitalLetters}.init({
            ^{reactRecipeInitDefault} // typecheck-only, removed from output
            // highlight-start
            emailVerificationFeature: {
                mode: "REQUIRED"
            }
        }),
        // highlight-end
        Session.init()
    ]
});
```

</TabItem>

</PreBuiltUITabs>

## Sending the verification email

### Pre Built UI

<PreBuiltUITabs>

<TabItem value="reactjs">

When a new user signs up with an unverified email, they will receive an email to verify their address and be redirected to the following screen:

<img alt="Email verification UI when the link in email is not clicked" width="500px" src="/img/emailpassword/verify-email-screen.png" />

</TabItem>

</PreBuiltUITabs>

### Custom UI

<CustomUITabs>

<TabItem value="web">

<FrontendWebSubTabs>

<TabItem value="npm">

```tsx
import ^{recipeNameCapitalLetters} from "supertokens-web-js/recipe/^{codeImportRecipeName}";

async function sendVerifyEmail() {
    const response = await ^{recipeNameCapitalLetters}.sendVerificationEmail();

    if (response.status === "EMAIL_ALREADY_VERIFIED_ERROR") {
        // The user's email is already verified
    }
}
```

</TabItem>

<TabItem value="script">

```tsx
import ^{recipeNameBundle} from "supertokens-web-js-script/recipe/^{codeImportRecipeName}";
async function sendVerifyEmail() {
    const response = await ^{recipeNameBundle}.sendVerificationEmail();

    if (response.status === "EMAIL_ALREADY_VERIFIED_ERROR") {
        // The user's email is already verified
    }
}
```

</TabItem>

</FrontendWebSubTabs>

</TabItem>
<TabItem value="mobile">

<FrontendMobileSubTabs>

</FrontendMobileSubTabs>

</TabItem>

</CustomUITabs>

## Verifying the user's email

### Pre Built UI

<PreBuiltUITabs>

<TabItem value="reactjs">

After the user clicks the link in the email, they will see this screen:

<img alt="Email verification UI once the link in email is clicked" width="500px" src="/img/emailpassword/email-verification-successful.png" />

</TabItem>

</PreBuiltUITabs>

### Custom UI

<CustomUITabs>

<TabItem value="web">

<FrontendWebSubTabs>

<TabItem value="npm">

```tsx
import ^{recipeNameCapitalLetters} from "supertokens-web-js/recipe/^{codeImportRecipeName}";

async function verifyEmail() {
    const response = await ^{recipeNameCapitalLetters}.verifyEmail();

    if (response.status === "EMAIL_VERIFICATION_INVALID_TOKEN_ERROR") {
        // token in the query params of the current location is invalid or has expired
    }
}
```

</TabItem>

<TabItem value="script">

```tsx
import ^{recipeNameBundle} from "supertokens-web-js-script/recipe/^{codeImportRecipeName}";
async function verifyEmail() {
    const response = await ^{recipeNameBundle}.verifyEmail();

    if (response.status === "EMAIL_VERIFICATION_INVALID_TOKEN_ERROR") {
        // token in the query params of the current location is invalid or has expired
    }
}
```

</TabItem>

</FrontendWebSubTabs>

</TabItem>
<TabItem value="mobile">

<FrontendMobileSubTabs>

</FrontendMobileSubTabs>

</TabItem>

</CustomUITabs>